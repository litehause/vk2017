// Generated by CoffeeScript 1.12.7
var Excursion,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Excursion = (function() {
  function Excursion(container) {
    this.container = container;
    this.initFileUploaderImage = bind(this.initFileUploaderImage, this);
    this.initFileUploader = bind(this.initFileUploader, this);
    $('#selectExhibit').select2();
    this.initFileUploader();
    this.initFileUploaderImage();
  }

  Excursion.prototype.initFileUploader = function() {
    this.fileUploader = $('#fileUploader').fileupload({
      dataType: "json",
      sequentialUploads: true,
      replaceFileInput: false,
      add: function(e, data) {
        return data.submit();
      },
      done: (function(_this) {
        return function(e, data) {
          var response;
          _this.fileUploader.empty();
          response = data.response().result;
          $("#fileId").val(response.id);
          $("#fileName").text(response.name);
          $("#addFile").hide();
          return $("#deleteFile").show();
        };
      })(this),
      fail: (function(_this) {
        return function(e, data) {
          return alert("fail upload region main image");
        };
      })(this)
    });
    $('#addFile').click((function(_this) {
      return function() {
        _this.fileUploader.val("");
        _this.fileUploader.empty();
        return _this.fileUploader.click();
      };
    })(this));
    return $("#deleteFile").click((function(_this) {
      return function() {
        $("#addFile").show();
        $("#deleteFile").hide();
        $("#fileId").val("");
        return $("#fileName").text("");
      };
    })(this));
  };

  Excursion.prototype.initFileUploaderImage = function() {
    this.fileUploaderImage = $('#fileUploaderImage').fileupload({
      dataType: "json",
      sequentialUploads: true,
      replaceFileInput: false,
      add: function(e, data) {
        return data.submit();
      },
      done: (function(_this) {
        return function(e, data) {
          var response;
          _this.fileUploaderImage.empty();
          response = data.response().result;
          $("#imageId").val(response.id);
          $("#fileNameImage").text(response.name);
          $("#addFileImage").hide();
          return $("#deleteFileImage").show();
        };
      })(this),
      fail: (function(_this) {
        return function(e, data) {
          return alert("fail upload region main image");
        };
      })(this)
    });
    $('#addFileImage').click((function(_this) {
      return function() {
        _this.fileUploaderImage.val("");
        _this.fileUploaderImage.empty();
        return _this.fileUploaderImage.click();
      };
    })(this));
    return $("#deleteFileImage").click((function(_this) {
      return function() {
        $("#addFileImage").show();
        $("#deleteFileImage").hide();
        $("#imageId").val("");
        return $("#fileNameImage").text("");
      };
    })(this));
  };

  return Excursion;

})();

$(function() {
  return new Excursion($("#excursionEdit"));
});
