// Generated by CoffeeScript 1.12.7
var ExhibitionEdit,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ExhibitionEdit = (function() {
  function ExhibitionEdit(container) {
    this.container = container;
    this.initSelectExhibit = bind(this.initSelectExhibit, this);
    this.initImageUploader = bind(this.initImageUploader, this);
    this.initSelectExhibit();
    this.initImageUploader();
  }

  ExhibitionEdit.prototype.initImageUploader = function() {
    this.fileUploader = $('#fileUploader').fileupload({
      dataType: "json",
      sequentialUploads: true,
      replaceFileInput: false,
      add: function(e, data) {
        return data.submit();
      },
      done: (function(_this) {
        return function(e, data) {
          var response;
          _this.fileUploader.empty();
          response = data.response().result;
          $("#fileId").val(response.id);
          $("#fileName").text(response.name);
          $("#addFile").hide();
          return $("#deleteFile").show();
        };
      })(this),
      fail: (function(_this) {
        return function(e, data) {
          return alert("fail upload region main image");
        };
      })(this)
    });
    $('#addFile').click((function(_this) {
      return function() {
        _this.fileUploader.val("");
        _this.fileUploader.empty();
        return _this.fileUploader.click();
      };
    })(this));
    return $("#deleteFile").click((function(_this) {
      return function() {
        $("#addFile").show();
        $("#deleteFile").hide();
        $("#fileId").val("");
        return $("#fileName").text("");
      };
    })(this));
  };

  ExhibitionEdit.prototype.initSelectExhibit = function() {
    return $('#selectExhibit').select2();
  };

  return ExhibitionEdit;

})();

$(function() {
  return new ExhibitionEdit($("#exhibitionEdit"));
});
